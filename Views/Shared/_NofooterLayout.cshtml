@inject IHttpContextAccessor HttpContextAccessor
@using System.Security.Claims

@{
    var user = HttpContextAccessor.HttpContext?.User;
    string? user_role = user?.FindFirst(ClaimTypes.Role)?.Value;  
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trung Tâm Tiên Tiến </title>
    <script type="importmap"></script>    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Auth.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Rating.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Table.css" asp-append-version="true" />    <link rel="stylesheet" href="~/css/_ManageLayout.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Home/HomeContent.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Home/TchList.css" asp-append-version="true" />    <link rel="stylesheet" href="~/css/Course/Manage.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Notification.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/NotificationOverride.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/ManageNotification.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/notification-popup-fix.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/REPO.styles.css" asp-append-version="true" />
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

</head>

<body>    <script src="~/js/init.js" asp-append-version="true"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/pagination.js" asp-append-version="true"></script>
    <script src="~/js/notification-handler.js" asp-append-version="true"></script>
    @await Html.PartialAsync("Components/_Header", user_role)
    <div class="content-wrapper">
        <div class="container">
            <main role="main" class="pb-3 ">
                <div class="clearfix">
                    @RenderBody()
                    <div>
            </main>
        </div>
    </div>

    <script>
        let userInfo = document.getElementById("user-info");
        if (userInfo) {
            userInfo.addEventListener("click", function () {
                let dropdown = document.getElementById("user-dropdown");
                dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
            });
        }
         let notificationInfo = document.getElementById("notification-info");
        if (notificationInfo) {
            notificationInfo.addEventListener("click", function () {
                let dropdown = document.getElementById("notification-dropdown");
                dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
                
                // Đóng user dropdown nếu đang mở
                let userDropdown = document.getElementById("user-dropdown");
                if (userDropdown && userDropdown.style.display === "block") {
                    userDropdown.style.display = "none";
                }
            });
        }
        document.addEventListener("DOMContentLoaded", function () {
            const eyeIconWrapper = document.querySelector(".eye-icon-wrapper");
            const eyeClose = document.querySelector(".eye-close");
            const eyeOpen = document.querySelector(".eye-open");
            const passwordInput = document.querySelector("input[name='password']");
            if (eyeIconWrapper != null)
            {
                eyeOpen.style.display = "none"; // Ẩn icon mở mắt mặc định

                eyeIconWrapper.addEventListener("click", function () {
                    if (eyeClose.style.display === "none") {
                        eyeClose.style.display = "block";
                        eyeOpen.style.display = "none";
                        passwordInput.type = "password";
                    } else {
                        eyeClose.style.display = "none";
                        eyeOpen.style.display = "block";
                        passwordInput.type = "text";
                    }
                });
            }
        });

    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
